<launch>
	<!-- merge two LaserScan topics -->
	<!-- <node pkg="topic_tools" type="relay" name="relay_tilt_scan_to_base_scan" args="tilt_scan base_scan" output="screen" /> -->

	<!-- LaserScan assembler -->
	<node pkg="laserscan_to_pointcloud" type="laserscan_to_pointcloud_assembler" name="laserscan_to_pointcloud_assembler" output="screen">
		<param name="laser_scan_topic" type="str" value="base_scan" />
		<param name="pointcloud_publish_topic" type="str" value="planar_pointcloud" />
		<param name="number_of_scans_to_assemble_per_cloud" type="int" value="1" />
		<param name="timeout_for_cloud_assembly" type="double" value="1.0" />
		<param name="target_frame" type="str" value="map" />
		<param name="min_range_cutoff_percentage_offset" type="double" value="5.00" />
		<param name="max_range_cutoff_percentage_offset" type="double" value="0.95" />
		<param name="include_laser_intensity" type="bool" value="false" />
	</node>


	<!-- tf publisher for localization pose -->
	<!-- rosrun dynamic_robot_localization pose_to_tf_publisher_node _initial_x:=-3.2 _initial_y:=-3.7 _initial_yaw:=1.57079632679 -->
	<node pkg="dynamic_robot_localization" type="pose_to_tf_publisher_node" name="pose_to_tf_publisher_node" output="screen">
		<param name="publish_rate" type="double" value="100.0" />
		<param name="initial_pose_with_covariance_stamped_topic" type="str" value="initialpose" />
		<param name="map_frame_id" type="str" value="map" />
		<param name="odom_frame_id" type="str" value="odom" />
		<param name="base_link_frame_id" type="str" value="base_footprint" />
		<param name="initial_x" type="double" value="-3.2" />
		<param name="initial_y" type="double" value="-3.75" />
		<param name="initial_z" type="double" value="0.0" />
		<param name="initial_roll" type="double" value="0.0" />
		<param name="initial_pitch" type="double" value="0.0" />
		<param name="initial_yaw" type="double" value="1.57079632679" />
	</node>


	<!-- planar localization -->
	<node pkg="dynamic_robot_localization" type="planar_localization_node" name="planar_localization_node" output="screen">
		<param name="planar_pointcloud_topic" type="str" value="planar_pointcloud" />
		<param name="costmap_topic" type="str" value="map" />
		<param name="reference_map_pointcloud_publish_topic" type="str" value="reference_map_pointcloud" />
		<param name="aligned_pointcloud_publish_topic" type="str" value="aligned_pointcloud" />
		<param name="pose_publish_topic" type="str" value="initialpose" />
		<param name="base_link_frame_id" type="str" value="base_footprint" />
		<param name="min_seconds_between_laserscan_registration" type="double" value="0.05" />
		<param name="min_seconds_between_map_update" type="double" value="5.0" />
		<param name="max_alignment_fitness_" type="double" value="0.5" />
		<param name="max_correspondence_distance" type="double" value="0.1" />
		<param name="transformation_epsilon" type="double" value="1e-6" />
		<param name="euclidean_fitness_epsilon" type="double" value="1.0" />
		<param name="max_number_of_iterations_" type="double" value="250" />
	</node>
</launch>